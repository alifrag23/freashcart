"use strict";(self.webpackChunkfreshCart=self.webpackChunkfreshCart||[]).push([[290],{5290:(g,m,c)=>{c.r(m),c.d(m,{CartComponent:()=>y});var l=c(6814),p=c(1120),t=c(4769),C=c(6286),u=c(2425);function h(e,_){1&e&&(t.TgZ(0,"h1",8),t._uU(1,"Shop Cart"),t.qZA())}function a(e,_){if(1&e){const r=t.EpF();t.TgZ(0,"div",4)(1,"h3",9),t._uU(2),t.ALo(3,"currency"),t.qZA(),t.TgZ(4,"button",10),t.NdJ("click",function(){t.CHM(r);const o=t.oxw();return t.KtG(o.claerCart())}),t._UZ(5,"i",11),t._uU(6," Clear Cart "),t.qZA()()}if(2&e){const r=t.oxw();t.xp6(2),t.hij(" Total Pricee : ",t.xi3(3,1,r.productOfCart.totalCartPrice,"EGP")," ")}}function i(e,_){if(1&e){const r=t.EpF();t.TgZ(0,"div",12)(1,"div",13),t._UZ(2,"img",14),t.qZA(),t.TgZ(3,"div",15)(4,"p",16),t._uU(5),t.qZA(),t.TgZ(6,"p",17),t._uU(7),t.ALo(8,"currency"),t.qZA(),t.TgZ(9,"button",18),t.NdJ("click",function(){const s=t.CHM(r).$implicit,d=t.oxw();return t.KtG(d.removeProduct(s.product._id))}),t._UZ(10,"i",11),t._uU(11," Remove "),t.qZA()(),t.TgZ(12,"div",19)(13,"button",20),t.NdJ("click",function(){const s=t.CHM(r).$implicit,d=t.oxw();return t.KtG(d.changeCount(s.count+1,s.product._id))}),t._uU(14," + "),t.qZA(),t.TgZ(15,"span",21),t._uU(16),t.qZA(),t.TgZ(17,"button",20),t.NdJ("click",function(){const s=t.CHM(r).$implicit,d=t.oxw();return t.KtG(d.changeCount(s.count-1,s.product._id))}),t._uU(18," - "),t.qZA()()()}if(2&e){const r=_.$implicit;t.xp6(2),t.Q6J("src",r.product.imageCover,t.LSH),t.xp6(3),t.Oqu(r.product.title),t.xp6(2),t.hij(" Price : ",t.xi3(8,4,r.price,"EGP")," "),t.xp6(9),t.Oqu(r.count)}}const f=function(e){return["/payment",e]};function b(e,_){if(1&e&&(t.TgZ(0,"button",22),t._uU(1," Online Payment "),t._UZ(2,"img",23),t.qZA()),2&e){const r=t.oxw();t.Q6J("routerLink",t.VKq(1,f,r.productOfCart._id))}}const v=function(e){return["/cashpayment",e]};function x(e,_){if(1&e&&(t.TgZ(0,"button",24),t._uU(1," Cash payment "),t.qZA()),2&e){const r=t.oxw();t.Q6J("routerLink",t.VKq(1,v,r.productOfCart._id))}}function O(e,_){1&e&&(t.TgZ(0,"h1",25),t._uU(1," Your Cart Is Empty...\u{1f914} "),t.qZA())}let y=(()=>{class e{constructor(r,n,o){this._CartService=r,this._toastr=n,this._Router=o,this.productOfCart=null}ngOnInit(){this.displayCart()}displayCart(){this._CartService.displayCart().subscribe({next:r=>{console.log(r),this.productOfCart=r.data},error:r=>{console.log(r)}})}removeProduct(r){this._CartService.deletProduct(r).subscribe({next:n=>{console.log(n),this.productOfCart=n.data,this.displayCart(),this._CartService.cartNumber.next(n.numOfCartItems)},error:n=>{console.log(n)}})}claerCart(){this._CartService.clearCart().subscribe({next:r=>{this._toastr.error("Your Cart Is Empty Now \u{1f625}"),console.log(r),this.productOfCart={},this._Router.navigate(["/home"])},error:r=>{console.log(r)}})}changeCount(r,n){0!==r?this._CartService.changeCount(n,r).subscribe({next:o=>{console.log(o),this.productOfCart=o.data},error:o=>{console.log(o)}}):this._toastr.warning("Error Action")}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(C.N),t.Y36(u._W),t.Y36(p.F0))};static#r=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-cart"]],standalone:!0,features:[t.jDz],decls:9,vars:6,consts:[[1,"w-75","mx-auto","p-5","bg-body-secondary","shadow-sm","rounded","rounded-4","mb-5"],["class","h3 fw-lighter",4,"ngIf"],["class","d-flex align-items-center justify-content-between",4,"ngIf","ngIfElse"],["class","row border-bottom p-4",4,"ngFor","ngForOf"],[1,"d-flex","align-items-center","justify-content-between"],["class","btn main-btn py-0 mt-4 me-1","type","button",3,"routerLink",4,"ngIf"],["class","btn main-btn py-2 px-3 mt-4 me-1","type","button",3,"routerLink",4,"ngIf"],["cart",""],[1,"h3","fw-lighter"],[1,"h4","text-main","fw-lighter","small"],["type","button",1,"btn","bg-transparent","text-danger","border-danger","mb-3","py-1","clear-cart-btn",3,"click"],[1,"fa-regular","fa-trash-can","remove-Prod"],[1,"row","border-bottom","p-4"],[1,"col-md-1"],["alt","product Image",1,"w-100",3,"src"],[1,"col-md-10"],[1,"p-0","m-0","fw-lighter"],[1,"text-main","m-0","p-0","fw-lighter"],["type","button",1,"border-0","bg-transparent","my-0","fw-lighter","text-danger","fw-lighter","px-0",3,"click"],[1,"col-md-1","d-flex","align-items-center"],["type","button",1,"btn","bg-transparent","border","border-success","rounded","btn-sm","rounded-2","count-bnt",3,"click"],[1,"px-1"],["type","button",1,"btn","main-btn","py-0","mt-4","me-1",3,"routerLink"],["src","./assets/images/visa-1.svg","alt","visa image"],["type","button",1,"btn","main-btn","py-2","px-3","mt-4","me-1",3,"routerLink"],["calss","fw-lighter py-5 bg-body-tertiary shadow"]],template:function(n,o){if(1&n&&(t.TgZ(0,"section",0),t.YNc(1,h,2,0,"h1",1),t.YNc(2,a,7,4,"div",2),t.YNc(3,i,19,7,"div",3),t.TgZ(4,"div",4),t.YNc(5,b,3,3,"button",5),t.YNc(6,x,2,3,"button",6),t.qZA()(),t.YNc(7,O,2,0,"ng-template",null,7,t.W1O)),2&n){const s=t.MAs(8);t.xp6(1),t.Q6J("ngIf",o.productOfCart),t.xp6(1),t.Q6J("ngIf",o.productOfCart)("ngIfElse",s),t.xp6(1),t.Q6J("ngForOf",o.productOfCart.products),t.xp6(2),t.Q6J("ngIf",o.productOfCart),t.xp6(1),t.Q6J("ngIf",o.productOfCart)}},dependencies:[l.ez,l.sg,l.O5,l.H9,p.rH],styles:[".remove-Prod[_ngcontent-%COMP%]{font-size:13px!important}.count-bnt[_ngcontent-%COMP%]:hover{background:#0aad0a!important;color:#fff!important}.clear-cart-btn[_ngcontent-%COMP%]:hover{background:#dc3545!important;color:#fff!important}"]})}return e})()},6286:(g,m,c)=>{c.d(m,{N:()=>C});var l=c(5619),p=c(4769),t=c(9862);let C=(()=>{class u{constructor(a){this._HttpClient=a,this.baseUrl="https://route-ecommerce.onrender.com",this.cartNumber=new l.X(0)}addCart(a){return this._HttpClient.post(this.baseUrl+"/api/v1/cart",{productId:a})}displayCart(){return this._HttpClient.get(this.baseUrl+"/api/v1/cart")}deletProduct(a){return this._HttpClient.delete(this.baseUrl+`/api/v1/cart/${a}`)}clearCart(){return this._HttpClient.delete(this.baseUrl+"/api/v1/cart")}changeCount(a,i){return this._HttpClient.put(this.baseUrl+`/api/v1/cart/${a}`,{count:i})}payment(a,i){return this._HttpClient.post(this.baseUrl+`/api/v1/orders/checkout-session/${a}?url=https://github.com/alifrag23/freshStore`,{shippingAddress:i})}payCash(a,i){return this._HttpClient.post(this.baseUrl+`/api/v1/orders/${a}`,{shippingAddress:i})}getAllOreder(a){return this._HttpClient.get(this.baseUrl+`/api/v1/orders/user/${a}`)}static#t=this.\u0275fac=function(i){return new(i||u)(p.LFG(t.eN))};static#r=this.\u0275prov=p.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"})}return u})()}}]);