"use strict";(self.webpackChunkfreshCart=self.webpackChunkfreshCart||[]).push([[243],{5243:(J,u,r)=>{r.r(u),r.d(u,{ProductsComponent:()=>F});var l=r(6814),h=r(756),p=r(1409),m=r(1120),d=r(95),t=r(4769);let g=(()=>{class i{transform(s,e){return s.filter(o=>o.title.toLowerCase().includes(e.toLowerCase()))}static#t=this.\u0275fac=function(e){return new(e||i)};static#s=this.\u0275pipe=t.Yjl({name:"search",type:i,pure:!0,standalone:!0})}return i})();var _=r(1132),f=r(6286),x=r(2425),v=r(8801);function C(i,a){1&i&&(t.TgZ(0,"h3",5),t._uU(1,"All Products"),t.qZA())}function P(i,a){if(1&i&&t._UZ(0,"i",19),2&i){const s=a.$implicit,e=t.oxw().$implicit;t.ekj("star",e.ratingsAverage>s)}}function T(i,a){if(1&i){const s=t.EpF();t.TgZ(0,"span",20),t.NdJ("click",function(){t.CHM(s);const o=t.oxw().$implicit,n=t.oxw();return t.KtG(n.addToWashList(o._id))}),t._UZ(1,"i",21),t.qZA()}}function Z(i,a){if(1&i){const s=t.EpF();t.TgZ(0,"span",20),t.NdJ("click",function(){t.CHM(s);const o=t.oxw().$implicit,n=t.oxw();return t.KtG(n.removeFromWashlist(o._id))}),t._UZ(1,"i",22),t.qZA()}}const A=function(i){return["/productdetails",i]},b=function(){return[1,2,3,4,5]};function w(i,a){if(1&i){const s=t.EpF();t.TgZ(0,"div",6)(1,"div",7)(2,"div",8),t._UZ(3,"img",9),t.TgZ(4,"h3",10),t._uU(5),t.qZA(),t.TgZ(6,"h4",11),t._uU(7),t.ALo(8,"cutText"),t.qZA(),t.TgZ(9,"div",12)(10,"span",13),t._uU(11),t.ALo(12,"currency"),t.qZA(),t.TgZ(13,"span",14),t.YNc(14,P,1,2,"i",15),t._uU(15),t.qZA()()(),t.TgZ(16,"button",16,17),t.NdJ("click",function(){const n=t.CHM(s).$implicit,c=t.MAs(17),L=t.oxw();return t.KtG(L.addCart(n._id,c))}),t._uU(18," + Add To Cart "),t.qZA(),t.YNc(19,T,2,0,"span",18),t.YNc(20,Z,2,0,"span",18),t.qZA()()}if(2&i){const s=a.$implicit,e=t.oxw();t.xp6(2),t.Q6J("routerLink",t.VKq(16,A,s._id)),t.xp6(1),t.Q6J("src",s.imageCover,t.LSH)("alt",s.title),t.xp6(2),t.hij(" ",s.category.name," "),t.xp6(2),t.hij(" ",t.xi3(8,10,s.title,3)," "),t.xp6(4),t.hij("",t.xi3(12,13,s.price,"EGP")," "),t.xp6(3),t.Q6J("ngForOf",t.DdM(18,b)),t.xp6(1),t.hij(" ",s.ratingsAverage," "),t.xp6(4),t.Q6J("ngIf",!e.washListData.includes(s._id)),t.xp6(1),t.Q6J("ngIf",e.washListData.includes(s._id))}}let F=(()=>{class i{constructor(s,e,o,n,c){this._ProductsService=s,this._CartService=e,this._toastr=o,this._Renderer2=n,this._WashlistService=c,this.text="",this.allProduct=[],this.pageSize=0,this.currentPage=0,this.total=0,this.washListData=[]}ngOnInit(){this.getAllProducts(1,40),this.getWashlist()}getAllProducts(s,e){this._ProductsService.getAllProduct(s,e).subscribe({next:o=>{this.allProduct=o.data,this.pageSize=o.metadata.limit,this.currentPage=o.metadata.currentPage,this.total=o.results},error:o=>{console.log(o)}})}addCart(s,e){this._Renderer2.setAttribute(e,"disabled","true"),this._CartService.addCart(s).subscribe({next:o=>{console.log(o),this._CartService.cartNumber.next(o.numOfCartItems),this._toastr.success(o.message+" \u{1f69b}"),this._Renderer2.removeAttribute(e,"disabled")},error:o=>{console.log(o),this._Renderer2.removeAttribute(e,"disabled")}})}addToWashList(s){this._WashlistService.addToWashlist(s).subscribe({next:e=>{this._toastr.success(e.message+"\u{1f49a}"),this.washListData=e.data},error:e=>{console.log(e)}})}removeFromWashlist(s){this._WashlistService.removeFromWashlist(s).subscribe({next:e=>{this._toastr.error(e.message+"\u{1f494}"),this.washListData=e.data},error:e=>{console.log(e)}})}getWashlist(){this._WashlistService.getWishlist().subscribe({next:s=>{const e=s.data.map(o=>o._id);console.log(e)},error:s=>{console.log(s)}})}static#t=this.\u0275fac=function(e){return new(e||i)(t.Y36(_.s),t.Y36(f.N),t.Y36(x._W),t.Y36(t.Qsj),t.Y36(v.h))};static#s=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-products"]],standalone:!0,features:[t.jDz],decls:6,vars:6,consts:[[1,"pb-4"],["class","fw-light",4,"ngIf"],["type","text","placeholder","Search..",1,"form-control","w-75","mx-auto","my-4",3,"ngModel","ngModelChange"],[1,"row","shadow-sm","gb-5","justify-content-center"],["class","colm col-sm-6 col-md-4 col-lg-3 col-xl-2 p-1 position-relative",4,"ngFor","ngForOf"],[1,"fw-light"],[1,"colm","col-sm-6","col-md-4","col-lg-3","col-xl-2","p-1","position-relative"],[1,"product","pb-3"],["role","button",3,"routerLink"],["alt","",1,"w-100","p-2","pb-3",3,"src","alt"],[1,"h6","ps-3","text-main","fw-lighter"],[1,"h5","ps-3","text-black","fw-light"],[1,"d-flex","align-items-center","justify-content-between","px-3"],[1,"text-muted","small"],[1,"p-0"],["class","fa-solid fa-star",3,"star",4,"ngFor","ngForOf"],["type","button",1,"add-btn","main-btn","w-75","mx-auto","d-block",3,"click"],["addBtn",""],["class","p-3 heart",3,"click",4,"ngIf"],[1,"fa-solid","fa-star"],[1,"p-3","heart",3,"click"],[1,"text-main","fs-2","fa-solid","fa-heart"],[1,"fa-solid","fa-heart-crack"]],template:function(e,o){1&e&&(t.TgZ(0,"section",0),t.YNc(1,C,2,0,"h3",1),t.TgZ(2,"input",2),t.NdJ("ngModelChange",function(c){return o.text=c}),t.qZA(),t.TgZ(3,"div",3),t.YNc(4,w,21,19,"div",4),t.ALo(5,"search"),t.qZA()()),2&e&&(t.xp6(1),t.Q6J("ngIf",o.allProduct.length>0),t.xp6(1),t.Q6J("ngModel",o.text),t.xp6(2),t.Q6J("ngForOf",t.xi3(5,3,o.allProduct,o.text)))},dependencies:[l.ez,l.sg,l.O5,l.H9,h.bB,p.Q,m.rH,d.u5,d.Fj,d.JJ,d.On,g]})}return i})()}}]);