"use strict";(self.webpackChunkfreshCart=self.webpackChunkfreshCart||[]).push([[683],{2683:(Z,i,a)=>{a.r(i),a.d(i,{ForgetpasswordComponent:()=>T});var _=a(6814),n=a(95),e=a(4769),u=a(847),c=a(2425),m=a(1120);function g(s,l){1&s&&(e.TgZ(0,"p"),e._uU(1," Email is Required "),e.qZA())}function p(s,l){1&s&&(e.TgZ(0,"p"),e._uU(1," Email is Not Valid "),e.qZA())}function d(s,l){if(1&s&&(e.TgZ(0,"div",8),e.YNc(1,g,2,0,"p",9),e.YNc(2,p,2,0,"p",9),e.qZA()),2&s){const o=e.oxw(2);let t,r;e.xp6(1),e.Q6J("ngIf",null==(t=o.forgetPassForm.get("email"))?null:t.getError("required")),e.xp6(1),e.Q6J("ngIf",null==(r=o.forgetPassForm.get("email"))?null:r.getError("email"))}}function f(s,l){if(1&s){const o=e.EpF();e.TgZ(0,"section",1)(1,"form",2),e.NdJ("ngSubmit",function(){e.CHM(o);const r=e.oxw();return e.KtG(r.handelForgetPass(r.forgetPassForm))}),e.TgZ(2,"div",3)(3,"label",4),e._uU(4,"Email"),e.qZA(),e._UZ(5,"input",5),e.YNc(6,d,3,2,"div",6),e.qZA(),e.TgZ(7,"button",7),e._uU(8," Forgot Password "),e.qZA()()()}if(2&s){const o=e.oxw();let t;e.xp6(1),e.Q6J("formGroup",o.forgetPassForm),e.xp6(5),e.Q6J("ngIf",(null==o.forgetPassForm||null==(t=o.forgetPassForm.get("email"))?null:t.errors)&&((null==(t=o.forgetPassForm.get("email"))?null:t.touched)||(null==(t=o.forgetPassForm.get("email"))?null:t.value.length)>0))}}function w(s,l){1&s&&(e.TgZ(0,"p"),e._uU(1," Code is Required "),e.qZA())}function P(s,l){if(1&s&&(e.TgZ(0,"div",8),e.YNc(1,w,2,0,"p",9),e.qZA()),2&s){const o=e.oxw(2);let t;e.xp6(1),e.Q6J("ngIf",null==(t=o.forgetPassForm.get("email"))?null:t.getError("required"))}}function C(s,l){if(1&s){const o=e.EpF();e.TgZ(0,"section",1)(1,"form",2),e.NdJ("ngSubmit",function(){e.CHM(o);const r=e.oxw();return e.KtG(r.handelResetCode(r.restCodeForm))}),e.TgZ(2,"div",3)(3,"label",10),e._uU(4,"Reset Code"),e.qZA(),e._UZ(5,"input",11),e.YNc(6,P,2,1,"div",6),e.qZA(),e.TgZ(7,"button",7),e._uU(8," Reset Code "),e.qZA()()()}if(2&s){const o=e.oxw();let t;e.xp6(1),e.Q6J("formGroup",o.restCodeForm),e.xp6(5),e.Q6J("ngIf",(null==o.forgetPassForm||null==(t=o.forgetPassForm.get("resetCode"))?null:t.errors)&&((null==(t=o.forgetPassForm.get("resetCode"))?null:t.touched)||(null==(t=o.forgetPassForm.get("resetCode"))?null:t.value.length)>0))}}function h(s,l){1&s&&(e.TgZ(0,"p"),e._uU(1," Password is Required "),e.qZA())}function x(s,l){1&s&&(e.TgZ(0,"p"),e._uU(1," Password is minLength 3 "),e.qZA())}function F(s,l){if(1&s&&(e.TgZ(0,"div",8),e.YNc(1,h,2,0,"p",9),e.YNc(2,x,2,0,"p",9),e.qZA()),2&s){const o=e.oxw(2);let t,r;e.xp6(1),e.Q6J("ngIf",null==(t=o.forgetPassForm.get("newPassword"))?null:t.getError("required")),e.xp6(1),e.Q6J("ngIf",null==(r=o.forgetPassForm.get("newPassword"))?null:r.getError("pattern"))}}function v(s,l){if(1&s){const o=e.EpF();e.TgZ(0,"section",1)(1,"form",2),e.NdJ("ngSubmit",function(){e.CHM(o);const r=e.oxw();return e.KtG(r.handelNewPass(r.newPassForm))}),e.TgZ(2,"div",3)(3,"label",12),e._uU(4,"Reset PassWord"),e.qZA(),e._UZ(5,"input",13),e.YNc(6,F,3,2,"div",6),e.qZA(),e.TgZ(7,"button",7),e._uU(8," Reset PassWord "),e.qZA()()()}if(2&s){const o=e.oxw();let t;e.xp6(1),e.Q6J("formGroup",o.newPassForm),e.xp6(5),e.Q6J("ngIf",(null==o.forgetPassForm||null==(t=o.forgetPassForm.get("newPassword"))?null:t.errors)&&((null==(t=o.forgetPassForm.get("newPassword"))?null:t.touched)||(null==(t=o.forgetPassForm.get("newPassword"))?null:t.value.length)>0))}}let T=(()=>{class s{constructor(o,t,r){this._PasswordService=o,this.toastr=t,this._Router=r,this.step1=!0,this.step2=!1,this.step3=!1,this.userEmail="",this.forgetPassForm=new n.cw({email:new n.NI("",[n.kI.required,n.kI.email])}),this.restCodeForm=new n.cw({resetCode:new n.NI("",[n.kI.required])}),this.newPassForm=new n.cw({newPassword:new n.NI("",[n.kI.required,n.kI.pattern(/^[a-zA-Z0-9!@#$%*]{6,}$/)])})}handelForgetPass(o){this.userEmail=o.value.email,console.log(this.userEmail),console.log(o.value),this._PasswordService.forgetPass(o.value.email).subscribe({next:t=>{this.toastr.success(t.message),console.log(t),"success"==t.statusMsg&&(this.step1=!1,this.step3=!1,this.step2=!0)},error:t=>{console.log(t),this.toastr.error(t.error.message)}})}handelResetCode(o){console.log(o.value.resetCode),this._PasswordService.resetCode(o.value.resetCode).subscribe({next:t=>{console.log(t),(t.status="Success")&&(this.toastr.success(t.status),this.step1=!1,this.step2=!1,this.step3=!0)},error:t=>{console.log(t),this.toastr.error(t.error.message)}})}handelNewPass(o){console.log(o.value),this._PasswordService.newPass(this.userEmail,o.value.newPassword).subscribe({next:t=>{console.log(t),null!==t.token&&this._Router.navigate(["/login"])},error:t=>{console.log(t)}})}static#e=this.\u0275fac=function(t){return new(t||s)(e.Y36(u.C),e.Y36(c._W),e.Y36(m.F0))};static#t=this.\u0275cmp=e.Xpm({type:s,selectors:[["app-forgetpassword"]],standalone:!0,features:[e.jDz],decls:3,vars:3,consts:[["class","w-75 mx-auto shadow-sm bg-body-secondary p-5 mb-5 rounded rounded-3",4,"ngIf"],[1,"w-75","mx-auto","shadow-sm","bg-body-secondary","p-5","mb-5","rounded","rounded-3"],[3,"formGroup","ngSubmit"],[1,"py-3"],["for","email"],["type","email","placeholder","Enter Your Email","id","email","formControlName","email",1,"form-control"],["class","alert alert-danger py-0",4,"ngIf"],["type","submit",1,"btn","main-btn","px-3","d-block","ms-auto"],[1,"alert","alert-danger","py-0"],[4,"ngIf"],["for","resetCode"],["type","text","placeholder","Enter Your Code","id","resetCode","formControlName","resetCode",1,"form-control"],["for","resetPass"],["type","password","placeholder","Enter Your Code","id","resetPass","formControlName","newPassword",1,"form-control"]],template:function(t,r){1&t&&(e.YNc(0,f,9,2,"section",0),e.YNc(1,C,9,2,"section",0),e.YNc(2,v,9,2,"section",0)),2&t&&(e.Q6J("ngIf",r.step1),e.xp6(1),e.Q6J("ngIf",r.step2),e.xp6(1),e.Q6J("ngIf",r.step3))},dependencies:[_.ez,_.O5,n.UX,n._Y,n.Fj,n.JJ,n.JL,n.sg,n.u],styles:["section[_ngcontent-%COMP%]{margin-top:90px!important}label[_ngcontent-%COMP%]{padding-block:.3125rem}"]})}return s})()}}]);